---
import ResearchCard from './CCResearchList/ResearchCard.astro';


export interface Props {
  researchGroups: Array<{
    year: string;
    items: Array<{
      id: string;
      putCode: string;
      title: string;
      description?: string;
      participants?: string[];
      externalIds?: string[];
      ownerOrcids?: string[];
      projectDate: string;
      projectName?: string;
      tags: string[];
    }>;
  }>;
  isAdmin?: boolean;
}

const { researchGroups, isAdmin } = Astro.props;
console.log("üîç ResearchList - isAdmin:", isAdmin);

---

<div class="space-y-8" id="publications">
  {
    researchGroups.map(({ year, items }) =>
      items.map((work) => (
        <ResearchCard 
          work={work} 
          year={year} 
          isAdmin={isAdmin} 
        />
      ))
    )
  }
</div>

<script>
// Asegurar que las funciones est√©n disponibles globalmente
if (typeof window !== 'undefined') {
  // Esto asegura que si el modal se carga despu√©s, las funciones est√©n definidas
  window.showResearchModal = window.showResearchModal || function() {
    console.warn('showResearchModal no est√° implementado a√∫n');
  };
  
  window.hideResearchModal = window.hideResearchModal || function() {
    console.warn('hideResearchModal no est√° implementado a√∫n');
  };
}
</script>
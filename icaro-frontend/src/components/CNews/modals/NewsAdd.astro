---

---

<div class="admin-control hidden flex justify-center mb-8 relative z-30">
  <button
    id="btn-add-news"
    class="flex items-center gap-2 bg-[#006D38] hover:bg-[#005229] text-white font-bold py-2.5 px-6 rounded-lg shadow-md transition-all duration-200 transform hover:-translate-y-0.5"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="h-5 w-5"
      viewBox="0 0 20 20"
      fill="currentColor"
    >
      <path
        fill-rule="evenodd"
        d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z"
        clip-rule="evenodd"></path>
    </svg>
    Añadir Noticia
  </button>
</div>

<div
  id="modal-add-news"
  class="hidden fixed inset-0 z-[9999] flex items-center justify-center p-4 fade-in"
  role="dialog"
  aria-modal="true"
>
  <div
    class="modal-overlay absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity"
  >
  </div>

  <div
    class="relative bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto transform transition-all"
  >
    <div class="p-8">
      <div
        class="flex justify-between items-center mb-6 pb-4 border-b border-gray-100"
      >
        <h3 class="text-2xl font-bold text-gray-800">Crear Nueva Noticia</h3>
      </div>

      <form id="form-add-news" novalidate class="space-y-6">
        <div>
          <label class="block mb-2 text-sm font-semibold text-gray-700"
            >ID de la noticia *</label
          >
          <div class="flex gap-2">
            <input
              type="text"
              id="newsId"
              name="id"
              required
              class="flex-grow px-4 py-2.5 border border-gray-300 rounded-lg outline-none transition-all placeholder-gray-400 focus:ring-1 focus:ring-[#006D38] focus:border-[#006D38] outline-none"
              placeholder="Clic en 'Generar' o escribe uno..."
            />
            <button
              type="button"
              id="btn-generate-id"
              class="px-3 py-2 text-sm bg-blue-100 text-green-800 rounded-md hover:bg-blue-200 whitespace-nowrap"
            >
              Generar
            </button>
            <button
              type="button"
              id="btn-verify-id"
              class="px-4 py-2 text-sm font-medium bg-gray-50 text-gray-700 border border-gray-200 rounded-lg hover:bg-gray-100 transition-colors"
            >
              Verificar
            </button>
          </div>
          <p id="id-status" class="text-xs text-gray-500 mt-2 ml-1">
            Un ID único es requerido.
          </p>
        </div>

        <div>
          <label class="block mb-2 text-sm font-semibold text-gray-700"
            >Título *</label
          >
          <input
            type="text"
            name="title"
            required
            class="w-full px-4 py-2.5 border border-gray-300 rounded-lg transition-all focus:ring-1 focus:ring-[#006D38] focus:border-[#006D38] outline-none"
            placeholder="Titular de la noticia"
          />
        </div>

        <div>
          <label class="block mb-2 text-sm font-semibold text-gray-700"
            >Descripción *</label
          >
          <textarea
            name="description"
            rows="4"
            required
            class="w-full px-4 py-2.5 border border-gray-300 rounded-lg transition-all resize-none focus:ring-1 focus:ring-[#006D38] focus:border-[#006D38] outline-none"
            placeholder="Resumen o contenido principal..."></textarea>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label class="block mb-2 text-sm font-semibold text-gray-700"
              >Fecha de Publicación</label
            >
            <input
              type="date"
              name="publicationDate"
              class="w-full px-4 py-2.5 border border-gray-300 rounded-lg transition-all focus:ring-1 focus:ring-[#006D38] focus:border-[#006D38] outline-none"
            />
          </div>

          <div>
            <label class="block mb-2 text-sm font-semibold text-gray-700"
              >Enlace (URL)</label
            >
            <input
              type="url"
              name="link"
              class="w-full px-4 py-2.5 border border-gray-300 rounded-lg transition-all focus:ring-1 focus:ring-[#006D38] focus:border-[#006D38] outline-none"
              placeholder="https://ejemplo.com"
            />
          </div>
        </div>

        <div class="flex justify-end gap-4 pt-6 border-t border-gray-100 mt-6">
          <button
            type="button"
            id="btn-cancel"
            onclick="window.closemodal()"
            class="px-6 py-2.5 border border-gray-300 rounded-lg text-gray-700 font-medium transition-all duration-300 hover:bg-gray-100 hover:text-gray-900 hover:border-gray-400 hover:shadow-sm transform hover:-translate-y-0.5 active:scale-95"
          >
            Cancelar
          </button>

          <button
            type="submit"
            class="px-8 py-2.5 bg-[#006D38] text-white rounded-lg hover:bg-[#005229] font-bold shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5 active:scale-95"
          >
            Crear Noticia
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
  import { initializeAddModal } from "@/utils/news/modals/newsAddModal";

  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", initializeAddModal);
  } else {
    initializeAddModal();
  }

  // Soporte para View Transitions de Astro si lo usas
  document.addEventListener("astro:page-load", initializeAddModal);
</script>

<style>
  .fade-in {
    animation: fadeIn 0.1s ease-out;
  }
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
</style>

---
import Loader from '@/components/CCommon/Loader.astro';
---

<div class="w-full mx-auto relative group">
  <div class="grid grid-cols-[auto_1fr_auto] gap-2 sm:gap-4 md:gap-6 lg:gap-8 items-center">
    
    <button
      id="prevBtn"
      aria-label="Anterior"
      type="button"
      class="hidden sm:flex w-10 h-10 md:w-12 md:h-12 lg:w-14 lg:h-14 items-center justify-center 
             bg-white/80 backdrop-blur rounded-full shadow-md border border-gray-100
             text-gray-700 hover:bg-[#1D293D] hover:text-white hover:border-[#1D293D] 
             transition-all duration-300 z-10 focus:outline-none focus:ring-2 focus:ring-[#1D293D]/50"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
    </button>

    <div
      id="slider"
      class="relative flex gap-4 sm:gap-6 md:gap-8 overflow-x-auto no-scrollbar scroll-smooth
             snap-x snap-mandatory w-full p-4 sm:p-5 md:p-6 lg:p-7 min-h-[400px] rounded-xl items-center"
    >
      <Loader id="carousel-loader" text="Cargando noticias destacadas..." />
      
      </div>

    <button
      id="nextBtn"
      aria-label="Siguiente"
      type="button"
      class="hidden sm:flex w-10 h-10 md:w-12 md:h-12 lg:w-14 lg:h-14 items-center justify-center 
             bg-white/80 backdrop-blur rounded-full shadow-md border border-gray-100
             text-gray-700 hover:bg-[#1D293D] hover:text-white hover:border-[#1D293D] 
             transition-all duration-300 z-10 focus:outline-none focus:ring-2 focus:ring-[#1D293D]/50"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
    </button>
  </div>
</div>

<script>
  import { setupCarousel } from "@/utils/index/carousel"; 

  // Inicializamos el carousel cuando el DOM esté listo
  // Pasamos los IDs en el orden que pide tu función: sliderId, prevBtnId, nextBtnId
  document.addEventListener('DOMContentLoaded', () => {
    setupCarousel('slider', 'prevBtn', 'nextBtn');
  });
</script>

<style>
  /* Ocultar scrollbar pero permitir funcionalidad de scroll */
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
  }
</style>